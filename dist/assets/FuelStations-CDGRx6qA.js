import{r,C as ot,v as c,J as a,N as l,$ as E,I as n,q as i,z as t,A as p,Z as x,a2 as R,M as $,P as U,O as _,u as lt,Q as u,K as at,L as N,_ as st,x as nt,y as it,a0 as rt}from"./group-user-BfSpxGtK.js";import{r as ct,u as dt}from"./xlsx-uoQkVabA.js";import{$ as j}from"./dataTables-DsLTsgIt.js";import{_ as ut}from"./index-Duv_0cVe.js";const _t=r(["Chitipa","Karonga","Rumphi","Mzimba","Mzuzu","Nkhatabay","Likoma","Nkhotakota","Dowa","Kasungu","Ntchisi","Salima","Lilongwe","Mchinji","Dedza","Ntcheu","Balaka","Mangochi","Zomba","Chiradzulu","Nsanje","Chikwawa","Blantyre","Mwanza","Neno","Thyolo","Phalombe","Mulanje","Machinga"]),s=v=>(nt("data-v-c1c0b245"),v=v(),it(),v),pt={action:""},mt=s(()=>t("button",{class:"btn brand-btn-primary",style:{color:"#fff","background-color":"#16AF47"},disabled:""},"Search",-1)),ft=s(()=>t("label",{for:"district",class:"form-label"},"Filter by District",-1)),bt=s(()=>t("option",{value:"",selected:""},"All Districts",-1)),ht=["value"],vt={class:"row"},yt=s(()=>t("div",{class:"col"},[t("strong",null,"Fuel Stations")],-1)),Ct={class:"col text-end"},gt={class:"table table-striped",id:"sTable"},St=s(()=>t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Station Name"),t("th",null,"OMC"),t("th",null,"Geography(Lng, Lat)"),t("th",null,"District"),t("th",null,"Physical Location"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),wt=["href"],kt={key:0,class:"bi bi-patch-check brand-primary-color"},Mt={key:1,class:"bi bi-stopwatch brand-secondary-color"},xt={key:2,class:"bi bi-x-circle text-danger"},Nt={key:3,class:"bi bi-building-fill-gear brand-secondary-color"},Tt=["href"],Lt=s(()=>t("i",{class:"bi bi-eye"},null,-1)),Dt=[Lt],At=s(()=>t("button",{title:"Edit",class:"btn brand-btn-secondary text-black btn-sm"},[t("i",{class:"b- bi-pencil"}),u(" Edit")],-1)),Ft={class:"mb-3"},Bt=s(()=>t("label",{for:"name",class:"form-label"},"Name",-1)),It={class:"mb-3"},zt=s(()=>t("label",{for:"latitude",class:"form-label"},"Latitude",-1)),Et={class:"mb-3"},Vt=s(()=>t("label",{for:"longitude",class:"form-label"},"Longitude",-1)),Rt={class:"mb-3"},$t=s(()=>t("label",{for:"type",class:"form-label"},"Station Type",-1)),Ut=s(()=>t("option",{selected:"",disabled:""},"-- Select Station Type--",-1)),jt=s(()=>t("option",{value:"fuel"},"Fuel Station",-1)),Ht=s(()=>t("option",{value:"hospital"},"Hospital",-1)),Pt=s(()=>t("option",{value:"school"},"Public School",-1)),Gt=[Ut,jt,Ht,Pt],Kt=["disabled"],V="http://localhost:3000/",Ot={__name:"FuelStations",setup(v){const y=r([]),m=r(!1),C=r(""),g=r(""),S=r(""),w=r(""),k=r(!1),T=r(""),L=r("all");let D;const H=()=>{D.search(T.value).draw()},P=()=>{D.column(4).search(L.value).draw()},{proxy:f}=rt(),A=async()=>{try{const d=await E.get(V+"stations");y.value=d.data}catch(d){console.error("Error fetching stations:",d)}},G=()=>{k.value=!0,E.post(V+"addServiceStation",{stationName:C.value,latitude:g.value,longitude:S.value,stationType:w.value}).then(()=>{k.value=!1,m.value=!1,f.$swal.fire("Success","Station added successfully","success"),C.value="",g.value="",S.value="",w.value="",A()}).catch(()=>{k.value=!1,f.$swal.fire("Error","An error occurred","error")})},K=()=>{f.$refs.fileInput.click()},O=d=>{const o=d.target.files[0];if(o){const b=new FileReader;b.onload=h=>{const F=new Uint8Array(h.target.result),M=ct(F,{type:"array"}),B=M.SheetNames[0],I=M.Sheets[B],z=dt.sheet_to_json(I,{defval:null,raw:!0});Q(z)},b.readAsArrayBuffer(o)}},Q=d=>{E.post(V+"importStations",d).then(()=>{f.$swal.fire("Success","Stations imported successfully","success"),A()}).catch(()=>{f.$swal.fire("Error","An error occurred during import","error")})};return ot(()=>{A().then(()=>{j(document).ready(function(){D=j("#sTable").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"Showing 0 to 0 of 0 entries",infoFiltered:"(filtered from _MAX_ total entries)",zeroRecords:"No matching records found",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}}})})})}),(d,o)=>{const b=n("CInputGroup"),h=n("CButton"),F=n("CCardHeader"),M=n("CTableDataCell"),B=n("CTableRow"),I=n("CCardBody"),z=n("CCard"),Z=n("CCol"),q=n("CRow"),J=n("CModalTitle"),X=n("CModalHeader"),W=n("CModalBody"),Y=n("CModalFooter"),tt=n("CModal");return i(),c("div",null,[a(q,null,{default:l(()=>[t("form",pt,[a(b,{class:"mb-3"},{default:l(()=>[p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>T.value=e),onInput:H,placeholder:"Search Fuel Stations"},null,544),[[x,T.value]]),mt]),_:1}),ft,a(b,{class:"mb-3"},{default:l(()=>[p(t("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=e=>L.value=e),onChange:P},[bt,(i(!0),c($,null,U(lt(_t),e=>(i(),c("option",{key:e,value:e},_(e),9,ht))),128))],544),[[R,L.value]])]),_:1})]),a(Z,{md:12},{default:l(()=>[a(z,null,{default:l(()=>[a(F,null,{default:l(()=>[t("div",vt,[yt,t("div",Ct,[a(h,{color:"primary",size:"sm",onClick:o[2]||(o[2]=()=>{m.value=!0})},{default:l(()=>[u("Add Station")]),_:1}),u("   "),a(h,{color:"primary",size:"sm",class:"brand-btn-primary",onClick:K},{default:l(()=>[u("Import")]),_:1}),t("input",{type:"file",ref:"fileInput",onChange:O,style:{display:"none"}},null,544)])])]),_:1}),a(I,null,{default:l(()=>[t("table",gt,[St,t("tbody",null,[y.value.length===0?(i(),at(B,{key:0},{default:l(()=>[a(M,{colspan:"7",class:"text-center"},{default:l(()=>[u("No stations available")]),_:1})]),_:1})):(i(!0),c($,{key:1},U(y.value,(e,et)=>(i(),c("tr",{key:y.value.id},[t("td",null,_(et+1),1),t("td",null,[t("a",{href:`/stations/station-details/${e.station_id}`,class:"text-decoration-none"},_(e.station_name),9,wt)]),t("td",null,_(e.omc),1),t("td",null,_(e.geog),1),t("td",null,_(e.district),1),t("td",null,_(e.p_location),1),t("td",null,[t("span",null,[e.status===1?(i(),c("i",kt)):N("",!0),e.status===0?(i(),c("i",Mt)):N("",!0),e.status===2?(i(),c("i",xt)):N("",!0),e.status===3?(i(),c("i",Nt)):N("",!0)])]),t("td",null,[t("a",{href:`/stations/station-details/${e.station_id}`,class:"btn brand-btn-primary btn-sm"},Dt,8,Tt),u("   "),At])]))),128))])])]),_:1})]),_:1})]),_:1})]),_:1}),a(tt,{visible:m.value,onClose:o[8]||(o[8]=()=>{m.value=!1}),"aria-labelledby":"LiveDemoExampleLabel"},{default:l(()=>[a(X,null,{default:l(()=>[a(J,{id:"LiveDemoExampleLabel"},{default:l(()=>[u("Add Service Station")]),_:1})]),_:1}),t("form",{onSubmit:st(G,["prevent"])},[a(W,null,{default:l(()=>[t("div",Ft,[Bt,p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=e=>C.value=e),id:"name"},null,512),[[x,C.value]])]),t("div",It,[zt,p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=e=>g.value=e),id:"lastName"},null,512),[[x,g.value]])]),t("div",Et,[Vt,p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=e=>S.value=e),id:"username"},null,512),[[x,S.value]])]),t("div",Rt,[$t,p(t("select",{class:"form-select","onUpdate:modelValue":o[6]||(o[6]=e=>w.value=e),id:"type"},Gt,512),[[R,w.value]])])]),_:1}),a(Y,null,{default:l(()=>[a(h,{color:"secondary",onClick:o[7]||(o[7]=()=>{m.value=!1})},{default:l(()=>[u(" Close ")]),_:1}),t("button",{type:"submit",class:"btn btn-primary",disabled:k.value},"Create",8,Kt)]),_:1})],32)]),_:1},8,["visible"])])}}},Xt=ut(Ot,[["__scopeId","data-v-c1c0b245"]]);export{Xt as default};
